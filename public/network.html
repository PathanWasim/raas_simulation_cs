<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RaaS Simulation ‚Äî Network Graph</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
  <!-- Cyberpunk Matrix Background -->
  <div class="matrix-bg"></div>
  
  <!-- Sidebar Navigation -->
  <nav class="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <span class="logo-icon">üï∏Ô∏è</span>
        <span class="logo-text">NETWORK</span>
        <span class="logo-subtitle">GRAPH</span>
      </div>
    </div>
    
    <div class="nav-menu">
      <div class="nav-section">
        <h3 class="nav-section-title">OPERATIONS</h3>
        <a href="dashboard.html" class="nav-item">
          <span class="nav-icon">üìä</span>
          <span class="nav-text">Dashboard</span>
        </a>
        <a href="campaigns.html" class="nav-item">
          <span class="nav-icon">üéØ</span>
          <span class="nav-text">Campaigns</span>
        </a>
        <a href="victims.html" class="nav-item">
          <span class="nav-icon">üë•</span>
          <span class="nav-text">Victims</span>
        </a>
        <a href="payments.html" class="nav-item">
          <span class="nav-icon">üí∞</span>
          <span class="nav-text">Payments</span>
        </a>
      </div>
      
      <div class="nav-section">
        <h3 class="nav-section-title">ANALYTICS</h3>
        <a href="network.html" class="nav-item active">
          <span class="nav-icon">üï∏Ô∏è</span>
          <span class="nav-text">Network Graph</span>
        </a>
        <a href="timeline.html" class="nav-item">
          <span class="nav-icon">‚è±Ô∏è</span>
          <span class="nav-text">Timeline</span>
        </a>
        <a href="logs.html" class="nav-item">
          <span class="nav-icon">üìã</span>
          <span class="nav-text">Logs</span>
        </a>
      </div>
      
      <div class="nav-section">
        <h3 class="nav-section-title">SYSTEM</h3>
        <a href="defense.html" class="nav-item">
          <span class="nav-icon">üõ°Ô∏è</span>
          <span class="nav-text">Blue Team Mode</span>
        </a>
        <a href="reports.html" class="nav-item">
          <span class="nav-icon">üìÑ</span>
          <span class="nav-text">Reports</span>
        </a>
        <a href="about.html" class="nav-item">
          <span class="nav-icon">‚ÑπÔ∏è</span>
          <span class="nav-text">About</span>
        </a>
      </div>
    </div>
    
    <!-- View Mode Selector -->
    <div class="role-selector">
      <h3 class="nav-section-title">VIEW MODE</h3>
      <div class="role-buttons">
        <button class="role-btn active" data-mode="graph">GRAPH</button>
        <button class="role-btn" data-mode="map">MAP</button>
        <button class="role-btn" data-mode="terminal">TERMINAL</button>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <header class="dashboard-header">
      <div class="header-left">
        <h1 class="dashboard-title">NETWORK VISUALIZATION</h1>
        <p class="dashboard-subtitle">Interactive network graph and geographic threat mapping</p>
      </div>
      <div class="header-right">
        <div class="status-indicators">
          <div class="status-item">
            <span class="status-dot active"></span>
            <span class="status-text">NETWORK LIVE</span>
          </div>
          <div class="status-item">
            <span class="status-dot warning"></span>
            <span class="status-text">SIMULATION MODE</span>
          </div>
        </div>
        <div class="header-actions">
          <button class="btn btn-primary" onclick="refreshNetwork()">
            <span class="btn-icon">üîÑ</span>
            REFRESH
          </button>
          <button class="btn btn-secondary" onclick="exportNetwork()">
            <span class="btn-icon">üìä</span>
            EXPORT
          </button>
          <button class="btn btn-danger" onclick="runAutoDemo()">
            <span class="btn-icon">‚ñ∂Ô∏è</span>
            AUTO DEMO
          </button>
        </div>
      </div>
    </header>

    <!-- Network Controls -->
    <div class="network-controls">
      <div class="control-group">
        <label for="layout-select">Layout Algorithm:</label>
        <select id="layout-select">
          <option value="force">Force Directed</option>
          <option value="circular">Circular</option>
          <option value="hierarchical">Hierarchical</option>
          <option value="grid">Grid</option>
        </select>
      </div>
      
      <div class="control-group">
        <label for="node-filter">Node Filter:</label>
        <select id="node-filter">
          <option value="all">All Nodes</option>
          <option value="operators">Operators</option>
          <option value="affiliates">Affiliates</option>
          <option value="victims">Victims</option>
          <option value="campaigns">Campaigns</option>
        </select>
      </div>
      
      <div class="control-group">
        <label for="animation-speed">Animation Speed:</label>
        <input type="range" id="animation-speed" min="0" max="100" value="50">
      </div>
      
      <div class="control-group">
        <button class="btn btn-small" onclick="resetView()">RESET VIEW</button>
        <button class="btn btn-small btn-secondary" onclick="toggleLabels()">TOGGLE LABELS</button>
      </div>
    </div>

    <!-- Network Graph View -->
    <div class="network-view" id="network-view">
      <div class="view-header">
        <h3>NETWORK TOPOLOGY</h3>
        <div class="network-stats">
          <span class="stat">Nodes: <span id="node-count">0</span></span>
          <span class="stat">Edges: <span id="edge-count">0</span></span>
          <span class="stat">Clusters: <span id="cluster-count">0</span></span>
        </div>
      </div>
      
      <div class="network-container">
        <svg id="network-svg" width="100%" height="600"></svg>
      </div>
    </div>

    <!-- Geographic Map View -->
    <div class="map-view" id="map-view" style="display: none;">
      <div class="view-header">
        <h3>GEOGRAPHIC THREAT MAP</h3>
        <div class="map-stats">
          <span class="stat">Countries: <span id="country-count">0</span></span>
          <span class="stat">Threats: <span id="threat-count">0</span></span>
          <span class="stat">Active: <span id="active-count">0</span></span>
        </div>
      </div>
      
      <div class="map-container">
        <div id="threat-map" style="height: 600px; width: 100%;"></div>
      </div>
    </div>

    <!-- Terminal View -->
    <div class="terminal-view" id="terminal-view" style="display: none;">
      <div class="view-header">
        <h3>NETWORK TERMINAL</h3>
        <div class="terminal-stats">
          <span class="stat">Commands: <span id="command-count">0</span></span>
          <span class="stat">Status: <span id="terminal-status">READY</span></span>
        </div>
      </div>
      
      <div class="terminal-container">
        <div class="terminal-window">
          <div class="terminal-header">
            <div class="terminal-buttons">
              <span class="btn-close"></span>
              <span class="btn-minimize"></span>
              <span class="btn-maximize"></span>
            </div>
            <div class="terminal-title">raas-simulation@network:~$</div>
          </div>
          <div class="terminal-body" id="terminal-body">
            <div class="terminal-line">
              <span class="prompt">raas-simulation@network:~$</span>
              <span class="command">help</span>
            </div>
            <div class="terminal-output">
              <div class="output-line">Available commands:</div>
              <div class="output-line">  scan - Scan network for active nodes</div>
              <div class="output-line">  trace - Trace connection paths</div>
              <div class="output-line">  analyze - Analyze network topology</div>
              <div class="output-line">  monitor - Monitor real-time activity</div>
              <div class="output-line">  clear - Clear terminal screen</div>
              <div class="output-line">  exit - Exit terminal</div>
            </div>
          </div>
          <div class="terminal-input">
            <span class="prompt">raas-simulation@network:~$</span>
            <input type="text" id="terminal-input" placeholder="Enter command..." autocomplete="off">
          </div>
        </div>
      </div>
    </div>

    <!-- Network Legend -->
    <div class="network-legend">
      <div class="legend-header">
        <h4>LEGEND</h4>
      </div>
      <div class="legend-items">
        <div class="legend-item">
          <div class="legend-color operator"></div>
          <span class="legend-label">Operators</span>
        </div>
        <div class="legend-item">
          <div class="legend-color affiliate"></div>
          <span class="legend-label">Affiliates</span>
        </div>
        <div class="legend-item">
          <div class="legend-color victim"></div>
          <span class="legend-label">Victims</span>
        </div>
        <div class="legend-item">
          <div class="legend-color campaign"></div>
          <span class="legend-label">Campaigns</span>
        </div>
        <div class="legend-item">
          <div class="legend-color connection"></div>
          <span class="legend-label">Connections</span>
        </div>
      </div>
    </div>

    <!-- Real-time Activity Feed -->
    <div class="activity-feed">
      <div class="feed-header">
        <h4>REAL-TIME ACTIVITY</h4>
        <button class="btn btn-small" onclick="clearActivityFeed()">CLEAR</button>
      </div>
      <div class="feed-content" id="activity-feed">
        <!-- Activity items will be populated by JavaScript -->
      </div>
    </div>

    <!-- Footer -->
    <footer class="dashboard-footer">
      <div class="footer-info">
        <span class="footer-text">Educational RaaS Simulation ‚Ä¢ Safe & Non-Malicious</span>
        <span class="footer-time" id="last-updated">Last updated: Never</span>
      </div>
    </footer>
  </main>

  <!-- Node Details Modal -->
  <div class="modal" id="node-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="node-modal-title">Node Details</h3>
        <button class="modal-close" onclick="closeNodeModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="node-details" id="node-details">
          <!-- Node details will be populated by JavaScript -->
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeNodeModal()">CLOSE</button>
        <button class="btn btn-primary" onclick="traceNode()">TRACE CONNECTIONS</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <script src="network.js"></script>
</body>
</html>
